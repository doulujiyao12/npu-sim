{
  "vars": {
    "B": 4,
    "T": 4,
    "C": 4,
    "NH": 4,
    "L": 1,
    "3C": 12,
    "4C": 16,
    "BTC": 64,
    "2BTC": 128,
    "3BTC": 192,
    "4BTC": 256,
    "layernorm1_data": 128,
    "layernorm1_out": 136,
    "matmul1_data": 200,
    "matmul1_out": 260,
    "attention1_data": 452,
    "attention1_out": 964,
    "matmul2_data": 1028,
    "matmul2_out": 64,
    "residual1_out": 1048,
    "layernorm2_data": 1176,
    "layernorm2_out": 1184,
    "matmul3_data": 1248,
    "matmul3_out": 1328,
    "gelu1_out": 1584,
    "matmul4_data": 1840,
    "matmul4_out": 1112,
    "residual2_out": 1908
  },
  "pipeline": 3,
  "source": [
    {
      "dest": 0,
      "size": "BTC"
    }
  ],
  "chips": [
    {
      "chip_id": 0,
      "GridX": 4,
      "GridY": 4,
      "cores": [
        {
          "id": 0,
          "cast": [
            {
              "dest": 1
            }
          ],
          "recv_cnt": 1,
          "prim_refill": true,
          "prims": [
            {
              "type": "Layernorm_f",
              "B": "B",
              "T": "T",
              "C": "C",
              "address": {
                "input": 0,
                "data": "layernorm1_data",
                "out": "layernorm1_out"
              }
            },
            {
              "type": "Matmul_f",
              "use_hw": false,
              "B": "B",
              "T": "T",
              "C": "C",
              "OC": "3C",
              "address": {
                "input": "layernorm1_out",
                "data": "matmul1_data",
                "out": "matmul1_out"
              }
            },
            {
              "type": "Attention_f",
              "B": "B",
              "T": "T",
              "C": "C",
              "NH": "NH",
              "address": {
                "input": "matmul1_out",
                "data": "attention1_data",
                "out": "attention1_out"
              }
            },
            {
              "type": "Matmul_f",
              "use_hw": false,
              "B": "B",
              "T": "T",
              "C": "C",
              "OC": "C",
              "address": {
                "input": "attention1_out",
                "data": "matmul2_data",
                "out": "matmul2_out"
              }
            },
            {
              "type": "Residual_f",
              "N": "BTC",
              "address": {
                "input": 0,
                "data": -1,
                "out": "residual1_out"
              }
            },
            {
              "type": "Layernorm_f",
              "B": "B",
              "T": "T",
              "C": "C",
              "address": {
                "input": "residual1_out",
                "data": "layernorm2_data",
                "out": "layernorm2_out"
              }
            },
            {
              "type": "Matmul_f",
              "B": "B",
              "T": "T",
              "C": "C",
              "OC": "4C",
              "address": {
                "input": "layernorm2_out",
                "data": "matmul3_data",
                "out": "matmul3_out"
              }
            },
            {
              "type": "Gelu_f",
              "N": "4BTC",
              "address": {
                "input": "matmul3_out",
                "data": -1,
                "out": "gelu1_out"
              }
            },
            {
              "type": "Matmul_f",
              "B": "B",
              "T": "T",
              "C": "4C",
              "OC": "C",
              "address": {
                "input": "gelu1_out",
                "data": "matmul4_data",
                "out": "matmul4_out"
              }
            },
            {
              "type": "Residual_f",
              "N": "BTC",
              "address": {
                "input": "residual1_out",
                "data": -1,
                "out": "residual2_out"
              }
            }
          ]
        },
        {
          "id": 1,
          "cast": [
            {
              "dest": 2
            }
          ],
          "recv_cnt": 1,
          "prim_refill": true,
          "prim_copy": 0
        },
        {
          "id": 2,
          "cast": [
            {
              "dest": 3
            }
          ],
          "recv_cnt": 1,
          "prim_refill": true,
          "prim_copy": 0
        },
        {
          "id": 3,
          "cast": [
            {
              "dest": -1
            }
          ],
          "recv_cnt": 1,
          "prim_refill": true,
          "prim_copy": 0
        }
      ]
    }
  ]
}
